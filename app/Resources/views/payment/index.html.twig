{% extends 'base.html.twig' %}

{% block stylesheets %}
<style>
    body { background: #F5F5F5; 
        font: 18px/1.5 sans-serif;
        padding-top: 80px;
    }

    h1{ 
        line-height: 1.2; 
        margin: 0 0 .5em;
        text-align: center;
    }

    #formPayment{
        margin:50px 0px;
    }

</style>
{% endblock %}


{% block body %}
    <section>
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-12 col-xs-12">
                    <h1>Welcome to Stephane's Lydia test!</h1>
            
                    <form id="formPayment" method="post" novalidate="novalidate" {{ form_enctype(form) }}>

                        <div class="form-group">
                            <label>{{ form_label(form.firstName) }}</label><br>
                            {{ form_widget(form.firstName) }}
                        </div>
                        <div class="form-group">
                            <label>{{ form_label(form.lastName) }}</label><br>
                            {{ form_widget(form.lastName) }}
                        </div>
                        <div class="form-group">
                            <label>{{ form_label(form.email) }}</label><br>
                            {{ form_widget(form.email) }}
                        </div>
                        
                        <button type="submit" form="formPayment" class="btn btn-success" id="submitPayment">Validate</button>

                        {{ form_rest(form) }}
                    </form>
                </div>
            </div>
        </div>
    </section>
{% endblock %}


{% block javascripts %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function(){
            
            $("#formPayment").submit(function(e) {
                var url = "{{ path('payment_create') }}"; 
                $.ajax({
                    type: "POST",
                    url: url,
                    data: $("#formPayment").serialize(),
                    success: function(data)
                    {
                        console.log("success");
                    }
                });

                e.preventDefault(); // avoid to execute the actual submit of the form.
            });
        });
    </script>
{% endblock %}